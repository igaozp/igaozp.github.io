<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="详细内容可参考大佬整理的资料 Java 拾遗卷1：语言特性 · 语雀，以下的内容是从个人角度觉得需要额外记录的内容。\n"><title>【Java 回炉计划】01：基础知识流水账</title>
<link rel=canonical href=https://andornot.xyz/posts/java-base-knowledge-01/><link rel=stylesheet href=/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css><meta property='og:title' content="【Java 回炉计划】01：基础知识流水账"><meta property='og:description' content="详细内容可参考大佬整理的资料 Java 拾遗卷1：语言特性 · 语雀，以下的内容是从个人角度觉得需要额外记录的内容。\n"><meta property='og:url' content='https://andornot.xyz/posts/java-base-knowledge-01/'><meta property='og:site_name' content='与或非 - AND OR NOT'><meta property='og:type' content='article'><meta property='article:section' content='Posts'><meta property='article:tag' content='Java'><meta property='article:published_time' content='2021-12-25T12:22:10+08:00'><meta property='article:modified_time' content='2021-12-25T12:22:10+08:00'><meta name=twitter:site content="@pzoagi"><meta name=twitter:creator content="@pzoagi"><meta name=twitter:title content="【Java 回炉计划】01：基础知识流水账"><meta name=twitter:description content="详细内容可参考大佬整理的资料 Java 拾遗卷1：语言特性 · 语雀，以下的内容是从个人角度觉得需要额外记录的内容。\n"><link rel="shortcut icon" href=/favicon.svg><script async src="https://www.googletagmanager.com/gtag/js?id=G-XCEK8PL0RD"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XCEK8PL0RD")}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_bb428460e6eb721b.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>😅</span></figure><div class=site-meta><h1 class=site-name><a href=/>与或非 - AND OR NOT</a></h1><h2 class=site-description>Existence precedes essence</h2></div></header><ol class=menu-social><li><a href=https://github.com/igaozp target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://twitter.com/pzoagi target=_blank title=Twitter rel=me><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/books/><svg class="icon icon-tabler icon-tabler-infinity" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M9.828 9.172a4 4 0 100 5.656A10 10 0 0012 12a10 10 0 012.172-2.828 4 4 0 110 5.656A10 10 0 0112 12 10 10 0 009.828 9.172"/></svg>
<span>Books</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>暗色模式</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><ol><li><a href=#静态常量池><strong>静态常量池</strong></a></li><li><a href=#运行时常量池><strong>运行时常量池</strong></a></li><li><a href=#字符串常量池><strong>字符串常量池</strong></a></li><li><a href=#方法区永久代><strong>方法区&永久代</strong></a></li></ol></li></ol><ol><li><ol><li><a href=#为什么-finally-代码块总能被执行><strong>为什么 finally 代码块总能被执行？</strong></a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/posts/java-base-knowledge-01/>【Java 回炉计划】01：基础知识流水账</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Dec 25, 2021</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长: 7 分钟</time></div></footer></div></header><section class=article-content><p>详细内容可参考大佬整理的资料 <a class=link href=https://www.yuque.com/inuter/nghb49 target=_blank rel=noopener>Java 拾遗卷1：语言特性 · 语雀</a>，以下的内容是从个人角度觉得需要额外记录的内容。</p><h1 id=面向对象>面向对象</h1><p><strong>里氏代换原则</strong>（Liskov Substitution Principle, LSP）：凡是父类能够出现的地方，都可以用子类替换。</p><p>多态是一种允许子类或接口可以有多种实现的特性，这种特性使得代码在运行时，同一个行为可能在不同的情况下，具有不同的表现形式。</p><p>子类 <code>Override</code> 父类方法时需要满足以下 4 个条件：</p><ol><li>方法的访问权限不能变小（private &lt;  package &lt; protected &lt; public）。</li><li>返回类型能够向上转型成为父类的返回类型。</li><li>异常也要能向上转型成为父类的异常。</li><li>方法名、参数类型及个数必须严格一致。</li></ol><p>把这个案例看明白：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>A</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>m</span><span class=p>(</span><span class=n>A</span><span class=w> </span><span class=n>a</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;AA&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>m</span><span class=p>(</span><span class=n>D</span><span class=w> </span><span class=n>d</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;AD&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>class</span> <span class=nc>B</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>A</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>m</span><span class=p>(</span><span class=n>A</span><span class=w> </span><span class=n>a</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;BA&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>m</span><span class=p>(</span><span class=n>B</span><span class=w> </span><span class=n>b</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;BD&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>class</span> <span class=nc>C</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>B</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>class</span> <span class=nc>D</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>B</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>Test</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=n>args</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>A</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>B</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>B</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>B</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>C</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>C</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>D</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>D</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>a</span><span class=p>.</span><span class=na>m</span><span class=p>(</span><span class=n>a</span><span class=p>);</span><span class=w> </span><span class=c1>// BA</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>a</span><span class=p>.</span><span class=na>m</span><span class=p>(</span><span class=n>b</span><span class=p>);</span><span class=w> </span><span class=c1>// BA</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>a</span><span class=p>.</span><span class=na>m</span><span class=p>(</span><span class=n>c</span><span class=p>);</span><span class=w> </span><span class=c1>// BA</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>a</span><span class=p>.</span><span class=na>m</span><span class=p>(</span><span class=n>d</span><span class=p>);</span><span class=w> </span><span class=c1>// AD</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h1 id=类>类</h1><p>普通的内部类可以与外部类互相访问私有属性。</p><p>构造方法调用的途径：</p><ul><li>通过 <code>new</code> 关键字</li><li>在子类的构造方法通过 <code>super</code> 关键字调用父类的构造方法</li><li>通过反射的方式获取并调用</li></ul><p>在创建类对象时，会先执行父类和子类的静态代码块，然后再执行父类和子类的构造方法。另外，静态代码块只会执行一次，而构造方法在每次实例化对象时都会被执行。</p><h1 id=接口注解>接口&注解</h1><p>注解是一种接口，但使用 <code>@interface</code> 修饰符修饰。</p><ul><li><code>@Target</code> 注解用于限定注解的适用范围</li><li><code>@Retention</code> 注解用于表示一个注解保存到哪个阶段</li><li><code>@Inherited</code> 注解仅作用于类，默认情况下，父类的普通注解不能被子类继承，但如果父类的注解被 <code>@Inherited</code> 注解修饰，则该注解可以被子类自动继承。</li></ul><p>Java 8 新增了一个 <code>@Repeatable</code> 元注解，使得某些注解可在同一元素上修饰多次。</p><h1 id=常用数据类型及问题>常用数据类型及问题</h1><p>Java 语言规范中并没有规定 <code>boolean</code> 类型数据的大小，其大小与 JVM 有关。</p><p>子类对象允许转换为父类对象，但父类对象不允许强制转换为子类对象。</p><p>由于计算机无法准确表示浮点数，<code>BigDemical</code> 不要使用入参为 <code>double</code> 类型的构造方法，而优先使用入参为 <code>String</code> 类型的构造方法。</p><p><code>RoundingMode</code> 类</p><p><a class=link href="https://www.yuque.com/inuter/nghb49/gakkv5?inner=g5LDq" target=_blank rel=noopener>https://www.yuque.com/inuter/nghb49/gakkv5?inner=g5LDq</a></p><p><code>BigDecimal</code> 类重写了 <code>equals</code> 方法，当且仅当两个 <code>BigDecimal</code> 对象表示的数值和 <code>scale</code> 都相同时，返回为 <code>true</code> ，如果两个对象表示的数值相同，但 <code>scale</code> 不同，返回 <code>false</code>。</p><p>如果希望只比较两个对象表示的数值，可以使用 <code>compareTo()</code> 方法</p><p>所有包装类都是 <strong>immutable</strong> 的（不可修改，不可继承），自动装箱都是通过包装类的 <code>valueOf()</code> 方法实现的，自动拆箱都是通过包装类的 <code>xxxValue()</code> 方法实现的。只有在自动装箱时（即调用 <code>valueOf()</code> 方法），相应的缓存机制才会生效。</p><p>对于 <code>表达式 1 ？ 表达式 2 ： 表达式 3</code> ，如果 <code>表达式 2</code> 和 <code>表达式 3</code> 有一项是基本数据类型，而另一项是对应的包转类型，那么包装类型的结果应该自动拆箱。</p><h1 id=string>String</h1><p>先看如下代码，判断变量 <code>str1</code> 和 <code>str2</code> 的值分别为什么？</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>String</span><span class=w> </span><span class=n>str1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>1</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>2</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;3&#34;</span><span class=p>;</span><span class=w>	</span><span class=c1>// 33</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>String</span><span class=w> </span><span class=n>str2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;1&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>2</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>3</span><span class=p>;</span><span class=w>	</span><span class=c1>// 123</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>如果用 <code>+</code> 操作符进行拼接时，拼接对象包含其它类型的常量。则左边第一个字符串常量前的所有 <code>+</code> 操作符都会视为加运算。</p><p>在循环体内，字符串的链接方法应该使用 <code>StringBuilder</code> 的 <code>append</code> 方法，而不是使用 <code>+</code> 操作符。</p><p>字符串的长度等于字符串所包含的 Unicode 代码点总数，即 length() 方法返回的是 Unicode 代码点总数。</p><p><strong>代码点</strong>（<em>code point</em>）是 Unicode 独有的定义，最简单的理解是：Unicode 中的每个字符都是一个代码点。说白了就是，“字符”在 Unicode 中被称为“代码点”。</p><p><strong>代码单元</strong>（<em>code unit</em>）是代码点的最小组成单位，可以理解为“一个代码点是由多个代码单元组成的”。根据一个代码单元所占内存的大小，可以分为 UTF-8、UTF-16、UTF-32。比如 UTF-8 就表示一个代码单元占用 8 个 bit，即 1 个字节。</p><p>那对于 UTF-8 来说，一个字符（或代码点）包含几个代码单元呢，答案是 1 - 4 个代码单元。这类似于计算机组成原理中说的“变长编码”或“赫夫曼编码”，中心思想是“使用频率较高的字符的编码长度尽可能的小”。</p><ul><li>UTF-8：一个代码点可能由 1- 4 个代码单元组成，一个代码单元占用 1 个字节；</li><li>UTF-16：一个代码点可能由 1- 2 个代码单元组成，一个代码单元占用 2 个字节；</li><li>UTF-32：一个代码点由 1 个代码单元组成，一个代码单元占用 4 个字节。</li></ul><h1 id=jvm>JVM</h1><h3 id=静态常量池><strong>静态常量池</strong></h3><p>静态常量池也称为 <strong>class 文件常量池</strong>，它是指 class 文件中的 <strong>Contant Pool</strong> 结构，可以通过 <code>javap -verbose</code> 工具反编译 class 文件查看。</p><p>静态常量池只是 class 文件的一个部分，仅存在于 class 文件中，与 JVM 无关。静态常量池用于存放编译阶段生成的各种<strong>字面量</strong>和<strong>符号引用</strong>。</p><p><strong>字面量</strong>包括字符串（如 String str = &ldquo;a&rdquo;）、基本类型的常量（即 <code>final</code> 修饰的变量）。<strong>符号引用</strong>包括类和方法的全限定名（如 <code>String</code> 类的全限定名为 <code>java/lang/String</code>）、字段的名称和描述符、方法的名称和描述符。</p><h3 id=运行时常量池><strong>运行时常量池</strong></h3><p>运行时常量池是方法区的一部分，全局共享。</p><p>当类被加载到内存中时，JVM 会将 class 文件中的静态常量池内容加载到运行时常量池中。在解析阶段，JVM 会把符号引用替换为直接引用（对象的索引值）。</p><h3 id=字符串常量池><strong>字符串常量池</strong></h3><p>字符串常量池也是方法区的一部分，全局共享。可以认为字符串常量池是一个对 <code>String</code> 进行缓存的结构。</p><h3 id=方法区永久代><strong>方法区&永久代</strong></h3><p>**方法区（Method Area）**是 Java 虚拟机规范中的一个概念，主要用来存放已被虚拟机加载的类的相关信息，包括类的信息、运行时常量池、字符串常量池等。</p><p>但 Java 虚拟机规范并未规定如何实现方法区，而常用的 <strong>HotSpot</strong> 虚拟机使用永久代（<strong>PermGen</strong>）来实现方法区，所以习惯将方法区称为永久代，但其实这两者并不等价。</p><h1 id=object-类>Object 类</h1><p><strong><code>wait()</code> 方法和 <code>Thread.sleep()</code> 方法有什么区别</strong> ？</p><ul><li><code>sleep()</code> 是 <code>Thread</code> 类中的静态方法，而 <code>wait()</code> 是 <code>Object</code> 类中本地方法；</li><li><code>sleep()</code> 不会释放锁，而 <code>wait()</code> 会释放，并自动加入到等待队列中；</li><li><code>sleep()</code> 不依赖于 synchronized 关键字，但 <code>wait()</code> 依赖，即 <code>wait()</code> 只能在 synchronized 块内使用；</li><li><code>sleep()</code> 不需要被主动唤醒（休眠之后退出阻塞），但 <code>wait()</code> 需要使用 <code>notify()</code> / <code>notifyAll()</code> 唤醒。</li></ul><p>Java 语言规范规定 <code>equals()</code> 方法必须具备以下几个特性：</p><ul><li><strong>自反性</strong>：如果 <code>x</code> 不为 <code>null</code> ， <code>x.equals(x)</code> 返回 <code>true</code> （ <code>x.equals(null)</code> 返回 <code>false</code> ）</li><li><strong>对称性</strong>：如果 <code>x.equals(y)</code> 为 <code>true</code> ，则 <code>y.equals(x)</code> 为 <code>true</code></li><li><strong>传递性</strong>：如果 <code>x.equals(y)</code> 为 <code>true</code> 且 <code>y.equals(z)</code> 为 <code>true</code> ，则 <code>x.equals(z)</code> 为 <code>true</code></li><li><strong>一致性</strong>：如果 <code>x</code> 和 <code>y</code> 未修改，则 <code>x.equals(y)</code> 的结果应该不变</li></ul><p><strong>equals 与 hashCode 默认原则</strong></p><ul><li>只要重写 <code>equals</code> ，就必须重写 <code>hashCode</code></li><li>如果 <code>equals()</code> 返回 <code>true</code>，则 <code>hashCode()</code> 必须也返回 <code>true</code></li><li>如果 <code>equals()</code> 返回 <code>false</code>，那 <code>hashCode()</code> 可以返回 <code>true</code> 或 <code>false</code></li><li>因为 <code>Set</code> 存储的是不重复的对象，依据 <code>hashCode</code> 和 <code>equals</code> 进行判断，所以 <code>Set</code> 存储的对象必须重写这两个方法</li><li>如果自定义对象作为 <code>Map</code> 的 key，那么必须重写这两个方法</li></ul><p><strong>equals 方法重写流程</strong></p><ol><li>可以先进行指针判断，如果是同一个对象，则直接返回 <code>true</code> ；</li><li>判断传入的参数是否为 <code>null</code> ，如果是，直接返回 <code>false</code> ；</li><li>判断两个对象的类型是否相同，如果不同，直接返回 <code>false</code> ；</li><li>在确保类型相同的前提下进行强制类型转换，再对逐一对字段进行比较。</li></ol><h1 id=泛型>泛型</h1><p>泛型本质是类型参数化，其与 JVM 无关，仅在编译时做语法检查，编译后被替换，这就是所谓的“类型擦除”。对于类型擦除，总结为一句话就是：<strong>无边界，替换为 Object ；有边界，替换为边界</strong>。</p><p>在编译一个泛型子类或泛型接口实现类时，编译器可能会生成一个 synthetic method，这种方法就叫桥接方法（bridge method）。桥接方法的出现是为了解决类型擦除对多态的破坏。</p><p><strong>正确理解 &lt;? extends T> 与 &lt;? super T></strong></p><ul><li><code>&lt;? extends T></code> 表示对象要么是 T 类型，要么是 T 的子类；</li><li><code>&lt;? super T></code> 表示对象要么是 T 类型，要么是 T 的父类。</li></ul><p><strong>如何选择 &lt;? extends T> 和 &lt;? super T></strong></p><ul><li><strong>不论是 <code>&lt;? extends T></code> 还是 <code>&lt;? super T></code> ，都是以类型 <code>T</code> 为中心的；</strong></li><li><strong>如果你想使用 <code>T</code> 类型对象，则用 <code>&lt;? extends T></code> ；如果你想添加 <code>T</code> 类型对象，则用 <code>&lt;? super T></code> 。</strong></li></ul><p><code>&lt;?></code> 称为无界通配符（unbounded wildcard），可以匹配任何类型，但赋值之后就不能再添加元素了（ null 可以），只能进行获取或删除操作。</p><h1 id=异常>异常</h1><p><code>Error</code> 类及其子类和 <code>RuntimeException</code> 类及其子类被称为 <strong>Unchecked Exception</strong>；其它所有继承自 <code>Throwable</code> 接口的子类（包括 <code>Exception</code> 类自身）则称为 **Checked Exception。**Checked Exception 需要在代码中显式处理，否则会编译出错。</p><p><code>NoClassDefFoundError</code> 和 <code>ClassNotFoundException</code> 有什么不同 ？</p><ul><li><code>ClassNotFoundException</code> 表示在运行时找不到指定的类，如调用 <code>Class.forName()</code> 方法时，如果找不到目标类，则抛出该异常。</li><li><code>NoClassDefFoundError</code> 表示未找到目标类的定义，如在编译成功后，故意删除一个类的 class 文件，在执行程序时，就会抛出该错误</li></ul><p>当存在 <code>try</code> 时，可以只有 <code>catch</code> 代码块，也可以只有 <code>fianlly</code> 代码块，但就是不能只有 <code>try</code> 部分。</p><p><code>finally</code> 是在 <code>return</code> 表达式运行后执行的，此时要 <code>return</code> 的结果已经被先暂存起来，等 <code>finally</code> 代码块执行结束后再返回之前暂存的返回值。</p><p><strong>不要在 <code>finally</code> 代码块中执行 <code>return</code> 语句。</strong></p><h3 id=为什么-finally-代码块总能被执行><strong>为什么 finally 代码块总能被执行？</strong></h3><p>因为编译器在编译 Java 代码时，会复制 <code>finally</code> 代码块，并分别放在 <code>try-catch</code> 所有正常执行路径及异常执行路径的出口中，这样不管发生什么情况， <code>finally</code> 代码块都会执行。</p><p><code>Throwable</code> 类的（直接或间接）子类不能是泛型类</p><h1 id=反射>反射</h1><p><a class=link href="https://www.yuque.com/inuter/nghb49/op33g0?inner=IimI7" target=_blank rel=noopener>https://www.yuque.com/inuter/nghb49/op33g0?inner=IimI7</a></p><p>其中 <code>getFields()</code> 、 <code>getConstructors()</code> 、 <code>getMethods()</code> 三个方法返回所有 public 修饰的属性和方法（包括从父类继承的）；而 <code>getDeclaredFields()</code> 、 <code>getDeclaredConstructors()</code> 、 <code>getDeclaredMethods()</code> 则仅返回本类定义的属性和方法，但不限于 <code>public</code>。</p></section><footer class=article-footer><section class=article-tags><a href=/tags/java/>Java</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js integrity=sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".main-article");renderMathInElement(e,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredClasses:["gist"]})})</script></article><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//andornot-xyz.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2016 -
2025 与或非 - AND OR NOT</section><section class=powerby>使用 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 构建<br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>